# Project 1
## Usage

The default `make` target will create a baseline and vectorized build of each
source file, as well as assembly outputs (in `src/asm-*/`) and vectorization
reports (in `src/obj-*/` with the `.o` files). `make clean` can be run to delete
all intermediate and output files generated by `make`.

The `generate-csvs.sh` script will run all of the compiled programs and make
CSV files with the relevant data from each experiment. From there,
`generate-charts.R` will create a pdf called `Rplots.pdf` containing graphs of
the CSV data.

To turn the PDF into a series of images I could embed in this markdown file, I
ran:
```
cpdf Rplots.pdf -gs gs -output-image -o images/chart%%.png
```
Of course, the ability to run some of these commands on your machine depends on
having the proper packages installed on your system, namely the 'R' language
(and some R libraries) and 'cpdf'/'gs' for pdf->png conversion.

## 1)

## 8) Proof of vectorization
Looking at the dissasembly of the vectorized build of Experiment 1, we can find
the code for Kernel 1 (streamed FMA), and we can see right here as it does
multiply/accumulate in a single instruction, operating on 8 floats at a time
(SIMD with a 256 bit vector width).
```asm
.L102:
# include/experiment-utils.h:88:         output[i] = scalar * arr1[i] + arr2[i];
	vmovaps	(%r15,%rax), %ymm0	# MEM <vector(8) float> [(float *)&f32_l2_arr1 + ivtmp.1232_2094 * 1], vect__460.900
	vfmadd213ps	(%r14,%rax), %ymm1, %ymm0	# MEM <vector(8) float> [(float *)&f32_l2_arr2 + ivtmp.1232_2094 * 1], vect_cst__2230, vect__460.900
# include/experiment-utils.h:88:         output[i] = scalar * arr1[i] + arr2[i];
	vmovaps	%ymm0, (%rbx,%rax)	# vect__460.900, MEM <vector(8) float> [(float *)&f32_l2_out + ivtmp.1232_2094 * 1]
	addq	$32, %rax	#, ivtmp.1232
	cmpq	$2000000, %rax	#, ivtmp.1232
	jne	.L102	#,

```

